%{
    Paste this data into Katana.m to analyze the NREL 5MW wind turbine (no precone angle) with a tilt and yaw of 0 degrees
}%




% rotor params
Rhub = 1.5; Rtip = 63; B = 3;
testRotor = initRotor(Rhub, Rtip, B, 'none', 'none');
% section params
r = [2.8667, 5.6000, 8.3333, 11.7500, 15.8500, 19.9500, 24.0500, 28.1500, 32.2500, 36.3500, 40.4500, 44.5500, 48.6500, 52.7500, 56.1667, 58.9000, 61.6333];
chord = [3.542, 3.854, 4.167, 4.557, 4.652, 4.458, 4.249, 4.007, 3.748, 3.502, 3.256, 3.010, 2.764, 2.518, 2.313, 2.086, 1.419];
theta = deg2rad([13.308, 13.308, 13.308, 13.308, 11.480, 10.162, 9.011, 7.795, 6.544, 5.361, 4.188, 3.125, 2.319, 1.526, 0.863, 0.370, 0.106]);

afData = ["data/Cylinder1.dat", "data/Cylinder2.dat", "data/DU40_A17.dat", "data/DU35_A17.dat", "data/DU30_A17.dat", "data/DU25_A17.dat", "data/DU21_A17.dat", "data/NACA64_A17.dat"];
afIndex = [1, 1, 2, 3, 4, 4, 5, 6, 6, 7, 7, 8, 8, 8, 8, 8, 8];
airfoils = afData(afIndex);

testSection = initSection(r, chord, theta, airfoils);

% op params
Uinf = 10; tsrL = 2; tsrU = 15; tsr = 7.55;
op = initOp(Uinf, rhoAir, muAir, tsrL, tsrU, tsr);

% [~,~,~] = solveRotor(testRotor, testSection, op);

% Max conditions for all coefficients
[maxCp, maxCt, maxCq] = performancePlot(testRotor, testSection, op);
% plotOut(testRotor, testSection, op);
